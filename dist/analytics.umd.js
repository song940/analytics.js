!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,t.Analytics=e())}(this,function(){"use strict";function t(e){if(!(this instanceof t))return new t(e);this.config={},Object.assign(this.config,{platform:"web",api:"/analytics"},e);const r=this.get("api");this.env=n,this.utm=i,this.cookies=a;var c=a("uuid");return c||(c=o(),a("uuid",c)),this.env.uuid=c,this.send=t.createShipper(function(e,n){return t.ajax(r,{env:this.env,utm:this.utm,data:e},n)}.bind(this)),this}const e=navigator.connection;var n={ua:navigator.userAgent,url:location.href,referer:document.referrer,language:navigator.language,platform:navigator.platform,network:{downlink:e.downlink,type:e.effectiveType,online:navigator.onLine}},r=(t=>t.split("&").reduce((t,e)=>{const n=e.split("=");const r=n[0];const i=!n[1]||decodeURIComponent(n[1]);t[r]?Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i;return t},{}))(location.search.slice(1)),i=Object.keys(r).reduce((t,e)=>{e.startsWith("utm_")&&(t[e]=r[e]);return t},{});const o=()=>"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}),c={};document.cookie.replace(/(.*?)=(.*?)($|;)\s?/g,function(t,e,n){c[unescape(e)]=unescape(n)});var a=(t,e)=>{if(!t)return c;if(!e)return c[t];document.cookie=escape(t)+"="+escape(e)+";"},s=(t,e)=>{if(1===arguments.length)return(e=localStorage.getItem(t))&&(e=JSON.parse(e)),e;localStorage.setItem(t,JSON.stringify(e))};return t.seq=0,t.prototype.__defineGetter__("seq",function(){return Date.now()+ ++t.seq}),t.createShipper=function(t){function e(t){n.push(t),s("$analycits.q",n)}if("function"!=typeof t)throw new TypeError('[Analytics.js] "post" must be a function ');const n=s("$analycits.q")||[];return setInterval(function(){const e=n.length;e&&t(n.slice(0,e),function(){n.splice(0,e),s("$analycits.q",n)})},3e3),e},t.prototype.get=function(t){return this.config[t]},t.prototype.set=function(t,e){return this.config[t]=e},t.prototype.track=function(t,e,n){return n=n||Date.now(),this.send({name:t,data:e,time:n})},t.prototype.trackEvent=function(t,e){return this.track("$event",{name:t,event:e})},t.prototype.trackPage=function(t,e,n){return t=t||location.href,e=e||document.title,n=n||document.referrer,this.trackEvent("$page",{url:t,title:e,referer:n})},t.prototype.trackClick=function(t){const e=t.target;return this.trackEvent("$click",{id:e.id,href:e.href,tag:e.tagName,class:e.className,text:e.textContent})},t});
